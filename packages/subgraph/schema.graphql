type SavedPurchase @entity(immutable: true) {
  id: Bytes!
  purchaseId: String! # string
  timestamp: BigInt! # uint256
  amount: BigInt! # uint256
  email: Bytes! # bytes32
  franchiseeId: String! # string
  method: BigInt! # uint32
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type Deposited @entity(immutable: true) {
  id: Bytes!
  email: Bytes! # bytes32
  depositAmount: BigInt! # uint256
  value: BigInt! # uint256
  balanceToken: BigInt! # uint256
  account: Bytes! # address
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type ExchangedMileageToToken @entity(immutable: true) {
  id: Bytes!
  email: Bytes! # bytes32
  amountMileage: BigInt! # uint256
  amountToken: BigInt! # uint256
  balanceMileage: BigInt! # uint256
  balanceToken: BigInt! # uint256
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type ExchangedTokenToMileage @entity(immutable: true) {
  id: Bytes!
  email: Bytes! # bytes32
  amountMileage: BigInt! # uint256
  amountToken: BigInt! # uint256
  balanceMileage: BigInt! # uint256
  balanceToken: BigInt! # uint256
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type PaidMileage @entity(immutable: true) {
  id: Bytes!
  email: Bytes! # bytes32
  paidAmountMileage: BigInt! # uint256
  value: BigInt! # uint256
  balanceMileage: BigInt! # uint256
  purchaseId: String! # string
  franchiseeId: String! # string
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type PaidToken @entity(immutable: true) {
  id: Bytes!
  email: Bytes! # bytes32
  paidAmountToken: BigInt! # uint256
  value: BigInt! # uint256
  balanceToken: BigInt! # uint256
  purchaseId: String! # string
  franchiseeId: String! # string
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type ProvidedMileage @entity(immutable: true) {
  id: Bytes!
  email: Bytes! # bytes32
  providedAmountMileage: BigInt! # uint256
  value: BigInt! # uint256
  balanceMileage: BigInt! # uint256
  purchaseId: String! # string
  franchiseeId: String! # string
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type ProvidedMileageToFranchisee @entity(immutable: true) {
  id: Bytes!
  email: Bytes! # bytes32
  providedAmountMileage: BigInt! # uint256
  value: BigInt! # uint256
  balanceMileage: BigInt! # uint256
  purchaseId: String! # string
  franchiseeId: String! # string
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type ProvidedToken @entity(immutable: true) {
  id: Bytes!
  email: Bytes! # bytes32
  providedAmountToken: BigInt! # uint256
  value: BigInt! # uint256
  balanceToken: BigInt! # uint256
  purchaseId: String! # string
  franchiseeId: String! # string
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type Withdrawn @entity(immutable: true) {
  id: Bytes!
  email: Bytes! # bytes32
  withdrawAmount: BigInt! # uint256
  value: BigInt! # uint256
  balanceToken: BigInt! # uint256
  account: Bytes! # address
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

enum UserAction {
  ProvidedMileage,
  ProvidedToken,
  PaidMileage,
  PaidToken,
  DepositedToken,
  WithdrawnToken,
  ExchangedMileageToToken,
  ExchangedTokenToMileage,
  ClearedMileage
}

type UserTradeHistory @entity(immutable: true) {
  id: Bytes!
  email: Bytes!
  action: UserAction!
  amountMileage: BigInt!
  amountToken: BigInt!
  value: BigInt!
  balanceMileage: BigInt!
  balanceToken: BigInt!
  purchaseId: String
  franchiseeId : String
  account: Bytes!
  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type UserBalance @entity {
  id: ID! # email

  mileage: BigInt!
  token: BigInt!

  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

enum FranchiseeAction {
  ProvidedMileage,
  UsedMileage,
  ClearedMileage
}

type FranchiseeTradeHistory @entity(immutable: true) {
  id: Bytes!
  franchiseeId: String! # string
  purchaseId: String

  action: FranchiseeAction!

  increase: BigInt! # uint256

  providedMileage: BigInt!
  usedMileage: BigInt!
  clearedMileage: BigInt!

  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}

type Franchisee @entity {
  id: ID! # franchiseeId

  provideWaitTime: BigInt! # uint256
  email: Bytes! # bytes32

  providedMileage: BigInt!
  usedMileage: BigInt!
  clearedMileage: BigInt!

  blockNumber: BigInt!
  blockTimestamp: BigInt!
  transactionHash: Bytes!
}
